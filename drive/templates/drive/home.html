{% extends 'base.html' %}

<!-- Page title -->
{% block title %} FTP - Drive {% endblock %}

<!-- Page content -->
{% block content %}
<main class="flex">
    <!-- Menu de controle do sistema -->
    <div class="w-sm h-[710px] bg-zinc-800 rounded-md m-2 shadow-md text-center text-white">
        <!-- Configurações e outras opções -->
        <div class="bg-zinc-900 p-2 m-1 rounded-md shadow-md">
            <ul>
                <li class="py-2">
                    <a href="#"
                        class="bg-indigo-800 hover:bg-indigo-600 px-4 py-2 rounded-md shadow-md transition">
                        {{ user.username }}
                    </a>
                </li>
                <li class="py-2 mt-2">
                    <a href="#"
                        class="bg-indigo-800 hover:bg-indigo-600 px-4 py-2 rounded-md shadow-md transition">
                        Configurações
                    </a>
                </li>
            </ul>
        </div>

        <!-- Formulário de envio de arquivos -->
        <div class="bg-zinc-900 p-2 m-1 rounded-md shadow-md">
            <form method="POST" enctype="multipart/form-data" class="m-2">
                {% csrf_token %}

                <input type="file" name="file_list" multiple
                    class="bg-zinc-700 px-2 py-6 rounded-md shadow-md">

                <button name="form_type" value="upload_form" type="submit"
                    class="bg-indigo-800 hover:bg-indigo-600 px-4 py-2 mt-2 rounded-md shadow-md transition">
                    Enviar
                </button>
            </form>
        </div>
    </div>

    <!-- Menu dos arquivos salvos -->
    <div class="w-7xl h-[710px] mx-auto mt-2 bg-zinc-800 rounded-md shadow-md">
        <div class="bg-zinc-900 m-1 rounded-md text-white">
            <input type="text" placeholder="Pesquisar por arquivo ou documento..."
            class="w-full p-3">
        </div>

        <!-- Tabela de arquivos  -->
        <div class="bg-zinc-900 h-[650px] p-2 m-1 rounded-md">
            <form method='POST'>
                {% csrf_token %}

                <button type="submit" name="form_type" value="download_form"
                    class="bg-blue-800 hover:bg-blue-600 transition px-4 py-2 rounded-md shadow-md text-white mb-2 mr-1">
                    Baixar
                </button>

                <button type="submit" name="form_type" value="delete_form"
                    class="bg-red-800 hover:bg-red-600 transition px-4 py-2 rounded-md shadow-md text-white">
                    Deletar
                </button>

                <div class="h-[580px] overflow-y-auto">
                    <table class="min-w-full text-center border-2 border border-gray-400">
                        <!-- Cabeçalho da tabela -->
                        <thead class="bg-zinc-700 text-white text-sm">
                            <tr>
                                <th class="font-medium px-4 py-2">
                                    <input id="select-all" type="checkbox" class="scale-125 accent-indigo-600 cursor-pointer">
                                </th>
                                <th class="font-medium px-4 py-2">Título</th>
                                <th class="font-medium px-4 py-2">Proprietário</th>
                                <th class="font-medium px-4 py-2">Data de Modificação</th>
                                <th class="font-medium px-4 py-2">Tamanho</th>
                            </tr>
                        </thead>

                        <!-- Corpo da tabela -->
                        <tbody class="divide-y divide-gray-400 bg-white">
                            {% for file in all_files %}
                                <tr class="hover:bg-zinc-400 hover:text-white transition">
                                    <td class="px-4 py-2">
                                        <input type="checkbox" name="files" value="{{ file.id }}"
                                        class="scale-125 accent-indigo-600 cursor-pointer">
                                    </td>
                                    <td class="font-medium px-4 py-2">{{ file.file_name }}</td>
                                    <td class="font-medium px-4 py-2">{{ file.owner }}</td>
                                    <td class="font-medium px-4 py-2">{{ file.created_at }}</td>
                                    <td class="font-medium px-4 py-2">{{ file.size }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </form>
        </div>
    </div>
</main>
{% endblock %}